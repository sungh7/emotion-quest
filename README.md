# 감정 퀘스트 (Emotion Quest) - PRD 문서

**버전**: 1.0.0  
**최종 업데이트**: 2024-03-26

## 📋 프로젝트 개요

감정 퀘스트는 사용자의 일상 감정을 추적하고 분석하여 감정 인식과 정신 건강 관리를 돕는 크로스 플랫폼 모바일 애플리케이션입니다. 사용자가 자신의 감정 상태를 기록하고, 패턴을 확인하며, 감정 변화를 시각적으로 분석할 수 있는 직관적인 도구를 제공합니다.

### 핵심 가치 제안

1. **감정 인식 강화**: 사용자가 자신의 감정을 인식하고 명명하는 능력 향상
2. **패턴 발견**: 시간에 따른 감정 패턴 파악을 통한 자기 이해 증진
3. **정신 건강 관리**: 감정 상태 추적을 통한 정신 건강 관리 지원
4. **직관적 사용성**: Apple의 UX 원칙을 적용한 사용하기 쉬운 인터페이스

## 🎯 타겟 사용자

- **일상적 감정 추적**: 자신의 감정 변화를 추적하고 싶은 일반 사용자
- **정신 건강 관리자**: 정신 건강 관리를 위해 감정 상태를 모니터링하려는 사용자
- **자기 계발 관심층**: 자기 인식과 감정 지능 향상에 관심이 있는 사용자
- **모바일 기기 친화적**: 일상에서 모바일 기기를 통해 빠르게 감정을 기록하고 싶은 사용자

## 💻 기술 스택

- **프론트엔드**: Flutter/Dart (크로스 플랫폼)
- **백엔드/데이터베이스**: Firebase (Authentication, Firestore)
- **데이터 시각화**: fl_chart 패키지
- **상태 관리**: Provider
- **로컬 데이터 저장**: shared_preferences
- **캘린더**: table_calendar 패키지

## 🌟 주요 기능

### 1. 감정 기록
- 8가지 기본 감정(행복, 기쁨, 사랑, 화남, 슬픔, 불안, 무기력, 지루함) 중 선택
- 이모지를 통한 시각적 감정 표현
- 선택적 상세 설명 추가 기능
- 타임스탬프 자동 기록

### 2. 감정 분석 및 리포트
- 주간/월간 감정 추세 그래프
- 감정 분포 통계
- 요일별 감정 패턴 분석
- 평균 감정 상태 요약
- 감정 변화 추세 인사이트

### 3. 사용자 관리
- 이메일/비밀번호 기반 회원가입 및 로그인
- 프로필 정보 표시
- 데이터 동기화 및 백업 (Firebase 연동)

### 4. 설정 및 맞춤화
- 다크/라이트 모드 전환
- 오프라인 모드 지원 (로컬 데이터 저장)

## 👨‍💻 기술적 구현

### 아키텍처 개요

애플리케이션은 **MVC(Model-View-Controller)** 패턴을 기반으로 구성되어 있습니다:

- **모델(Models)**: 감정 기록 및 사용자 데이터를 정의하는 클래스
- **뷰(Screens)**: 사용자 인터페이스 화면 구성
- **서비스(Services)**: 비즈니스 로직 및 데이터 처리 레이어

### 폴더 구조

```
lib/
├── models/         # 데이터 모델 정의
│   └── emotion_record.dart
├── screens/        # UI 화면 컴포넌트
│   ├── home_screen.dart
│   ├── auth_screen.dart
│   ├── report_screen.dart
│   └── emotion_detail_screen.dart
├── services/       # 비즈니스 로직 및 API 연동
│   ├── emotion_service.dart
│   ├── firebase_service.dart
│   └── theme_service.dart
├── widgets/        # 재사용 가능한 UI 컴포넌트
│   └── emotion_button.dart
└── main.dart       # 앱 진입점 및 초기화
```

### 데이터 모델

**감정 기록(EmotionRecord)**
```dart
class EmotionRecord {
  final String emotion;    // 감정 이름 (행복, 슬픔 등)
  final String emoji;      // 감정 이모지
  final DateTime timestamp; // 기록 시간
  final String? details;   // 선택적 상세 설명
  final String? id;        // Firebase 문서 ID
  final String? userId;    // 사용자 ID
  
  // 생성자, JSON 직렬화/역직렬화 메서드...
}
```

## 📱 화면 및 사용자 경험

### 1. 홈 화면 (HomeScreen)
- 8가지 감정 버튼 그리드 표시
- 현재 로그인 상태 표시
- 테마 전환 및 로그아웃 기능
- 감정 선택 시 상세 정보 입력 다이얼로그

### 2. 인증 화면 (AuthScreen)
- 로그인/회원가입 전환 인터페이스
- 입력 유효성 검사
- 애니메이션 및 햅틱 피드백 제공
- 오류 메시지 표시

### 3. 리포트 화면 (ReportScreen)
- 감정 추세 라인 차트
- 감정 분포 파이 차트
- 주요 통계 지표 카드
- 요일별 패턴 분석

### 4. 감정 상세 화면 (EmotionDetailScreen)
- 선택된 감정 표시
- 추가 설명 입력 필드
- 저장 옵션 (간단/상세)

## 🎨 UI/UX 디자인 원칙

애플리케이션은 **Apple의 Human Interface Guidelines**를 중심으로 디자인되었습니다:

1. **명확성**: 텍스트, 아이콘, 그래픽이 기능을 명확히 전달
2. **직관성**: 사용자의 예상과 일치하는 조작 방식
3. **피드백**: 버튼 애니메이션, 햅틱 피드백으로 사용자 액션에 반응
4. **일관성**: 화면 간 일관된 디자인 언어 유지
5. **효율성**: 최소한의 단계로 작업 완료 가능

### 디자인 세부 사항

- **색상 팔레트**: 
  - 라이트 모드: iOS 표준 컬러 (파란색 기본, 감정별 컬러 계열)
  - 다크 모드: 최적화된 어두운 배경과 가독성 높은 텍스트
  
- **타이포그래피**:
  - San Francisco 폰트 활용 (iOS 기본)
  - 계층적 텍스트 스타일 (제목, 본문, 캡션 등)
  
- **상호작용**:
  - 애니메이션 효과 (누르기, 전환)
  - 햅틱 피드백 (버튼 누름, 성공/실패)
  - 제스처 인식 (스와이프, 탭)

## 🔄 데이터 흐름

1. **사용자 인증**:
   - Firebase Authentication을 통한 인증
   - 로그인 상태 앱 전체에서 관리

2. **감정 기록**:
   - 사용자 입력 → EmotionRecord 모델 생성
   - EmotionService를 통해 Firestore에 저장
   - 비로그인 상태에서는 로컬 저장소 사용

3. **데이터 분석**:
   - Firestore에서 사용자별 감정 기록 검색
   - EmotionService에서 데이터 가공 및 분석
   - 시각화 컴포넌트에 데이터 전달

## ⚙️ 성능 최적화

- **지연 로딩**: 필요한 데이터만 초기에 로드
- **캐싱**: 이미 로드된 감정 기록 메모리에 저장
- **비동기 처리**: 데이터 로딩 중 UI 반응성 유지
- **에러 복구**: 네트워크 오류 발생 시 로컬 데이터 활용

## 🔒 보안 고려사항

- **사용자 인증**: Firebase Authentication 활용
- **데이터 접근 제어**: Firestore 보안 규칙으로 사용자별 데이터 접근 제한
- **입력 유효성 검증**: 클라이언트 및 서버 측 모두에서 검증
- **민감 정보 보호**: 개인 감정 데이터 암호화 고려

## 📊 미래 개선 계획

1. **AI 기반 감정 분석**: 텍스트 설명에서 감정 패턴 자동 분석
2. **소셜 기능**: 가족/친구와 감정 공유 (선택적)
3. **건강 앱 연동**: 수면, 운동 등 건강 데이터와 감정 상관관계 분석
4. **알림 기능**: 감정 기록 리마인더
5. **맞춤형 콘텐츠**: 감정 상태에 따른 명상, 음악 추천

## 🧪 테스트 전략

- **단위 테스트**: 핵심 비즈니스 로직 검증
- **위젯 테스트**: UI 컴포넌트 동작 검증
- **통합 테스트**: 전체 플로우 테스트
- **사용성 테스트**: 실제 사용자 피드백 수집

## 📄 결론

감정 퀘스트는 감정 인식과 정신 건강을 지원하는 직관적이고 사용하기 쉬운 도구를 제공합니다. Apple의 UX 원칙에 따라 설계된 인터페이스와 Firebase의 안정적인 백엔드 통합으로, 사용자는 일상에서 감정을 쉽게 기록하고 시간에 따른 패턴을 발견할 수 있습니다.

이 애플리케이션은 자기 인식 향상, 정신 건강 관리, 감정 지능 개발에 관심이 있는 사용자들에게 가치 있는 도구가 될 것입니다.
